<!DOCTYPE html>
<html>
<body>

<h2>Using the XMLHttpRequest Object</h2>

<div id="demo">
    <button type="button" onclick="loadXMLDoc()">Change Content</button>
</div>

<script type="text/javascript">
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        "userId":"linzhe",
        "firstname":"Zhengxian",
        "lastname":"Lin",
        "phoneNumber":"123456",
        "email":"linzhe@oregonstate.edu",
        "address":"fjdhsklfjklasd",
        "orderId":null,
        "finishRegister":"1"
    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/read.php?view=update");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    xhr.open("GET","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=request_info&requestId=321");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send();
    */

    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        'request_orderid': '321',
        'request_userid' : 'linzhe',
        'departure_location': 'portland',
        'destination_location': 'corvallis',
        'departure_time': '2018-11-07 16:34:11',
        'post_time': '2018-11-07 16:34:00',
        'remarks' : 'test',
        'available_seats': '1',
        'available': '1',
        'finished': 1
    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=update");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        'post_userid' : 'linzhe',
        'departure_location': '111 sw 222th st',
        'destination_location': 'portland',
        'departure_time': '2018-11-07 16:34:11',
        'post_time': '2018-11-07 16:34:00',
        'remarks' : 'test',
        'available_seats': '4',
        'available': '2',
        'finished': '1',
        'departure_city':'convallis',
        'departure_state':'oregon',
        'destination_city':'portland',
        'destination_state':'oregon',

    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/post_order.php?view=insert");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    xhr.open("GET","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=request_order_all");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send();
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    xhr.open("GET","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=location&departure=portland&destination=corvallis");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send();
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        'postId': '1541467858chenk5'
    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/post_order.php?view=delete");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        'request_userid' : 'linzhe',
        'departure_location': 'corvallis',
        'destination_location': 'portland',
        'departure_time': '2018-11-07 16:34:12',
        'post_time': '2018-11-07 16:34:00',
        'remarks' : 'test',
        'people_number': '4',
        'available': '1',
        'finished': '0'
    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=insert");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        'requestId': '1541554138'
    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=delete");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */
    /*
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function()
    {
        if( xhr.readyState==4 && xhr.status==200 )
        {
            console.log(xhr.responseText);
        }
    }
    var json = {
        'request_orderid': '1541554181linzhe',
        'request_userid' : 'linzhe',
        'departure_location': 'pord',
        'destination_location': 'corvallis',
        'departure_time': '2018-11-02 16:34:11',
        'post_time': '2018-11-07 16:34:00',
        'remarks' : 'tst',
        'people_number': '1',
        'available': '1',
        'finished': 0
    };
    xhr.open("POST","http://web.engr.oregonstate.edu/~hezhi/api/request_order.php?view=update");
    xhr.setRequestHeader("Content-Type","application/json;charset=utf-8");
    xhr.send(JSON.stringify(json));
    */

    lb = "<label for=\"departure_time\">Departure Time</label><br>";
    cl = "<input id=\"party\" type=\"datetime-local\" name=\"partydate\" min=\"" + getNowFormatDate(new Date()) + "\" max=\"" + getNowFormatDate(new Date(new Date().getTime() + 14*60*60*24*1000)) +"\">";
    document.getElementById("demo").innerHTML = lb + cl;

    function getNowFormatDate(date) {
        var date = date;
        var seperator1 = "-";
        var seperator2 = ":";
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
            + "T" + date.getHours() + seperator2 + date.getMinutes()
        return currentdate;
    }

</script>
<div class="form-group" id="demo">
</div>
</body>
</html>
